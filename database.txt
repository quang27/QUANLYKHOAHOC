create database QLKH
USE QLKH
GO

/****** Object:  Table [dbo].[GIANGVIEN]    Script Date: 8/27/2023 7:15:38 PM ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[GIANGVIEN](
	[IDgiangvien] [int] IDENTITY(1,1) NOT NULL,
	[name] [nvarchar](50) NULL,
	[telephone] [nchar](20) NULL,
	[address] [nvarchar](100) NULL,
	[birthday] [datetime] NULL,
	[img] [nvarchar](350) NULL,
	[status] [int] NULL,
 CONSTRAINT [PK_GIANGVIEN] PRIMARY KEY CLUSTERED 
(
	[IDgiangvien] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
CREATE TABLE [dbo].[SINHVIEN](
	[IDsinhvien] [int] IDENTITY(1,1) NOT NULL,
	[name] [nvarchar](50) NULL,
	[telephone] [nchar](20) NULL,
	[address] [nvarchar](100) NULL,
	[birthday] [datetime] NULL,
	[img] [nvarchar](350) NULL,
	[status] [int] NULL,
 CONSTRAINT [PK_SINHVIEN] PRIMARY KEY CLUSTERED 
(
	[IDsinhvien] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
CREATE TABLE [dbo].[KHOAHOC](
	[IDkhoahoc] [int] IDENTITY(1,1) NOT NULL,
	[name] [nvarchar](50) NULL,
	[makhoahoc] [nvarchar](50) NULL unique,
	[status] [int] NULL,
PRIMARY KEY CLUSTERED 
(
	[IDkhoahoc] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY],
UNIQUE NONCLUSTERED 
(
	[makhoahoc] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
CREATE TABLE [dbo].[LOPHOC](
	[IDlophoc] [int] IDENTITY(1,1) NOT NULL,
	[name] [nvarchar](50) NULL,
	[status] [int] NULL,
	[IDkhoahoc] [int] NULL,
	[start] [date] NULL,
	[finish] [date] NULL,
 CONSTRAINT [PK_LOPHOC] PRIMARY KEY CLUSTERED 
(
	[IDlophoc] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[LOPHOC]  WITH CHECK ADD  CONSTRAINT [FK_LOPHOC_KHOAHOC] FOREIGN KEY([IDkhoahoc])
REFERENCES [dbo].[KHOAHOC] ([IDkhoahoc])
GO

ALTER TABLE [dbo].[LOPHOC] CHECK CONSTRAINT [FK_LOPHOC_KHOAHOC]
GO
CREATE TABLE [dbo].[LOPSINHVIEN](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[IDsinhvien] [int] NULL,
	[IDlophoc] [int] NULL,
 CONSTRAINT [PK_LOPSINHVIEN] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[LOPSINHVIEN]  WITH CHECK ADD  CONSTRAINT [FK_LOPSINHVIEN_LOPHOC] FOREIGN KEY([IDlophoc])
REFERENCES [dbo].[LOPHOC] ([IDlophoc])
GO

ALTER TABLE [dbo].[LOPSINHVIEN] CHECK CONSTRAINT [FK_LOPSINHVIEN_LOPHOC]
GO

ALTER TABLE [dbo].[LOPSINHVIEN]  WITH CHECK ADD  CONSTRAINT [FK_LOPSINHVIEN_SINHVIEN] FOREIGN KEY([IDsinhvien])
REFERENCES [dbo].[SINHVIEN] ([IDsinhvien])
GO

ALTER TABLE [dbo].[LOPSINHVIEN] CHECK CONSTRAINT [FK_LOPSINHVIEN_SINHVIEN]
GO
CREATE TABLE [dbo].[LOPGIANGVIEN](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[IDgiangvien] [int] NULL,
	[IDlophoc] [int] NULL,
 CONSTRAINT [PK_LOPGIANGVIEN] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[LOPGIANGVIEN]  WITH CHECK ADD  CONSTRAINT [FK_LOPGIANGVIEN_GIANGVIEN] FOREIGN KEY([IDgiangvien])
REFERENCES [dbo].[GIANGVIEN] ([IDgiangvien])
GO

ALTER TABLE [dbo].[LOPGIANGVIEN] CHECK CONSTRAINT [FK_LOPGIANGVIEN_GIANGVIEN]
GO

ALTER TABLE [dbo].[LOPGIANGVIEN]  WITH CHECK ADD  CONSTRAINT [FK_LOPGIANGVIEN_LOPHOC] FOREIGN KEY([IDlophoc])
REFERENCES [dbo].[LOPHOC] ([IDlophoc])
GO

ALTER TABLE [dbo].[LOPGIANGVIEN] CHECK CONSTRAINT [FK_LOPGIANGVIEN_LOPHOC]
GO